<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student Final Grade Prediction</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    .bg-hero {
      background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%);
    }
  </style>
</head>
<body class="bg-slate-50">
  <header class="bg-hero text-white">
    <div class="max-w-5xl mx-auto py-8 px-6 flex items-center justify-between">
      <h1 class="text-2xl sm:text-3xl font-bold">CampusScore • Final Grade (G3) Predictor</h1>
      <div class="text-sm opacity-90">School Analytics</div>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-6 py-8">
    <div class="grid md:grid-cols-2 gap-8">
      <section class="bg-white shadow rounded-xl p-6">
        <h2 class="text-xl font-semibold mb-4">Student Profile</h2>
        <form action="{{ request.url_for('predict') }}" method="post" class="space-y-4">

        <!-- Categorical Fields -->
        <label class="block text-sm font-medium">School</label>
        <select name="school" required class="w-full border rounded px-3 py-2">
            <option value="GP">GP</option>
            <option value="MS">MS</option>
        </select><br>

        <label class="block text-sm font-medium">Gender (Sex)</label>
        <select name="sex" required class="w-full border rounded px-3 py-2">
            <option value="M">Male</option>
            <option value="F">Female</option>
        </select><br>

        <label class="block text-sm font-medium">Address</label>
        <select name="address" required class="w-full border rounded px-3 py-2">
            <option value="U">Urban</option>
            <option value="R">Rural</option>
        </select><br>

        <label class="block text-sm font-medium">Family Size</label>
        <select name="famsize" required class="w-full border rounded px-3 py-2">
            <option value="LE3">≤3</option>
            <option value="GT3">>3</option>
        </select><br>

        <label class="block text-sm font-medium">Parent Cohabitation Status (Pstatus)</label>
        <select name="Pstatus" required class="w-full border rounded px-3 py-2">
            <option value="T">Living Together</option>
            <option value="A">Apart</option>
        </select><br>

        <label class="block text-sm font-medium">Mother's Job</label>
        <select name="Mjob" required class="w-full border rounded px-3 py-2">
            <option value="teacher">Teacher</option>
            <option value="health">Health</option>
            <option value="services">Services</option>
            <option value="at_home">At Home</option>
            <option value="other">Other</option>
        </select><br>

        <label class="block text-sm font-medium">Father's Job</label>
        <select name="Fjob" required class="w-full border rounded px-3 py-2">
            <option value="teacher">Teacher</option>
            <option value="health">Health</option>
            <option value="services">Services</option>
            <option value="at_home">At Home</option>
            <option value="other">Other</option>
        </select><br>

        <label class="block text-sm font-medium">Reason for Choosing School</label>
        <select name="reason" required class="w-full border rounded px-3 py-2">
            <option value="home">Home</option>
            <option value="reputation">Reputation</option>
            <option value="course">Course</option>
            <option value="other">Other</option>
        </select><br>

        <label class="block text-sm font-medium">Guardian</label>
        <select name="guardian" required class="w-full border rounded px-3 py-2">
            <option value="mother">Mother</option>
            <option value="father">Father</option>
            <option value="other">Other</option>
        </select><br>

        <!-- Binary Yes/No -->
        {% for field in ['schoolsup','famsup','paid','activities','nursery','higher','internet','romantic'] %}
        <label class="block text-sm font-medium">{{ field|capitalize }}</label>
        <select name="{{ field }}" required class="w-full border rounded px-3 py-2">
            <option value="yes">Yes</option>
            <option value="no">No</option>
        </select><br>
        {% endfor %}

        <!-- Numerical Fields -->
        <label class="block text-sm font-medium">Age</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="age" min="10" max="22" required>

        <label class="block text-sm font-medium">Mother's Education (0-4)</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="Medu" min="0" max="4" required>

        <label class="block text-sm font-medium">Father's Education (0-4)</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="Fedu" min="0" max="4" required>

        <label class="block text-sm font-medium">Travel Time (1-4)</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="traveltime" min="1" max="4" required>

        <label class="block text-sm font-medium">Study Time (1-4)</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="studytime" min="1" max="4" required>

        <label class="block text-sm font-medium">Failures</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="failures" min="0" max="3" required>

        <label class="block text-sm font-medium">Family Relationship (1-5)</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="famrel" min="1" max="5" required>

        <label class="block text-sm font-medium">Free Time (1-5)</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="freetime" min="1" max="5" required>

        <label class="block text-sm font-medium">Going Out (1-5)</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="goout" min="1" max="5" required>

        <label class="block text-sm font-medium">Daily Alcohol (1-5)</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="Dalc" min="1" max="5" required>

        <label class="block text-sm font-medium">Weekend Alcohol (1-5)</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="Walc" min="1" max="5" required>

        <label class="block text-sm font-medium">Health (1-5)</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="health" min="1" max="5" required>

        <label class="block text-sm font-medium">Absences</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="absences" min="0" required>

        <label class="block text-sm font-medium">G1</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="G1" min="0" max="20" required>

        <label class="block text-sm font-medium">G2</label>
        <input class="w-full border rounded px-3 py-2" type="number" name="G2" min="0" max="20" required>

        <!-- Submit -->
        <button type="submit" class="mt-4 inline-flex items-center bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Predict Final Grade (G3)</button>
      </form>
      </section>

      <aside class="bg-white shadow rounded-xl p-6">
        <h2 class="text-xl font-semibold mb-4">Prediction</h2>
        {% if error %}
          <div class="mb-3 rounded bg-red-50 text-red-700 px-3 py-2 text-sm">{{ error }}</div>
        {% endif %}
        {% if results is not none %}
          <div class="text-4xl font-bold text-blue-700">{{ '%.2f'|format(results) }}</div>
          <p class="text-slate-500 mt-2">Estimated final grade out of 20.</p>
        {% else %}
          <p class="text-slate-500">Submit the form to see the predicted final grade.</p>
        {% endif %}
        <div class="mt-6 text-sm text-slate-500">Model: {{ model_name or 'Unknown' }}</div>
        {% if metrics %}
          <div class="mt-2 text-sm text-slate-500">R²: {{ '%.3f'|format(metrics.get('R2', 0)) }} • RMSE: {{ '%.3f'|format(metrics.get('RMSE', 0)) }}</div>
        {% endif %}
      </aside>
    </div>
  </main>

  <footer class="text-center text-slate-500 text-sm py-6">© CampusScore • School Analytics</footer>
</body>
</html>
